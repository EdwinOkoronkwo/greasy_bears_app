<!-- <ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>My Account</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="confirmLogout()">
        <ion-icon
          name="power-outline"
          color="white"
          slot="icon-only"
        ></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div *ngIf="isLoading" class="ion-text-center align-spinner">
    <ion-spinner color="primary"></ion-spinner>
  </div>
  <ng-container *ngIf="!isLoading">
    <ion-list class="borderBottom">
      <ion-item lines="full">
        <ion-button slot="end" fill="clear" (click)="editProfile()"
          ><ion-text color="secondary">EDIT</ion-text></ion-button
        >
        <ion-avatar *ngIf="profile.image" slot="start">
          <ion-img [src]="serverUrl + profileUrl + profile?.image"> </ion-img>
        </ion-avatar>
        <ion-label>
          <ion-text class="ion-text-uppercase" color="primary"
            ><h4>
              <strong>{{profile.firstName}} {{profile.lastName}} </strong>
            </h4></ion-text
          >
          <p>{{profile.phone}} | {{profile.email}}</p>
        </ion-label>
      </ion-item>
      <ion-item
        lines="none"
        detail="true"
        [routerLink]="['/', 'tabs', 'address']"
      >
        <ion-icon name="home-outline" slot="start" color="secondary"></ion-icon>
        <h5>Manage Addresses</h5>
      </ion-item>
    </ion-list>
    <ion-list>
      <ion-list-header>
        <ion-label color="secondary">PAST ORDERS</ion-label>
      </ion-list-header>
      <ion-text class="ion-text-center" *ngIf="!orders ">
        <p class="pTag">No Orders Placed Yet!</p>
      </ion-text>
      <ng-container *ngFor="let order of orders">
        <ion-item-group class="borderBottom">
          <ion-item lines="none" class="dashedBorderBottom">
            <ion-label>
              {{ order.paymentMode }}
              <p class="pTag" *ngIf="order.Items">${{ order.paymentStatus}}</p>
              <p class="pTag">${{ order.deliveryCharge}}</p>
              <ion-text
                ><p>
                  ${{ order.grandTotal }}
                  <ion-icon name="chevron-forward-outline"></ion-icon></p
              ></ion-text>
            </ion-label>
            <ion-note slot="end" color="primary">
              {{ order.status }}
              <ion-icon
                name="checkmark-circle-outline"
                color="success"
              ></ion-icon>
            </ion-note>
          </ion-item>
          <ion-item lines="none">
            <ion-label>
              <ion-label>
                <p class="time">{{ order.createdAt }}</p>
              </ion-label>
              <ion-row>
                <ion-col size="6">
                  <ion-button
                    fill="outline"
                    expand="block"
                    color="secondary"
                    (click)="reorder(order)"
                    >REORDER</ion-button
                  >
                </ion-col>
                <ion-col size="6">
                  <ion-button
                    fill="outline"
                    expand="block"
                    color="primary"
                    (click)="getHelp(order)"
                    >GET HELP</ion-button
                  >
                </ion-col>
              </ion-row>
            </ion-label>
          </ion-item>
        </ion-item-group>
      </ng-container>
    </ion-list>
  </ng-container>
</ion-content> -->

<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>My Account</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="confirmLogout()">
        <ion-icon
          name="power-outline"
          color="white"
          slot="icon-only"
        ></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div *ngIf="isLoading" class="ion-text-center align-spinner">
    <ion-spinner color="primary"></ion-spinner>
  </div>
  <ng-container *ngIf="!isLoading">
    <ion-list class="borderBottom">
      <ion-item lines="full">
        <ion-button slot="end" fill="clear" (click)="editProfile()"
          ><ion-text color="secondary">EDIT</ion-text></ion-button
        >
        <ion-avatar *ngIf="profile?.image" slot="start">
          <ion-img [src]="serverUrl + profileUrl + profile?.image"> </ion-img>
        </ion-avatar>
        <ion-label>
          <ion-text class="ion-text-uppercase" color="primary"
            ><h4>
              <strong>{{profile.firstName}} {{profile.lastName}} </strong>
            </h4></ion-text
          >
          <p>{{profile.phone}} | {{profile.email}}</p>
        </ion-label>
      </ion-item>
      <ion-item
        lines="none"
        detail="true"
        [routerLink]="['/', 'tabs', 'address']"
      >
        <ion-icon name="home-outline" slot="start" color="secondary"></ion-icon>
        <h5>Manage Addresses</h5>
      </ion-item>
    </ion-list>
    <ion-list>
      <ion-list-header>
        <ion-label color="secondary">PAST ORDERS</ion-label>
      </ion-list-header>
      <ion-text class="ion-text-center" *ngIf="!orders ">
        <p class="pTag">No Orders Placed Yet!</p>
      </ion-text>
      <ng-container *ngFor="let order of orders ">
        <!-- <app-orders [order]="order" (reorder)="reorder($event)"></app-orders> -->
        <ion-item-group class="borderBottom">
          <ion-item lines="none" class="dashedBorderBottom">
            <ion-label>
              <ion-label>
                <p class="time">{{ order.createdAt | date: 'mediumDate' }}</p>
              </ion-label>
            </ion-label>
            <ion-note slot="end" color="primary">
              {{ order.status }}
              <ion-icon
                name="checkmark-circle-outline"
                color="success"
              ></ion-icon>
            </ion-note>
          </ion-item>
          <!-- <p class="pTag">
            {{item.name}} | {{ item.OrderItem.quantity}} ea | $ {{item.price}}
            per item | Total Price: ${{item.price * item.OrderItem.quantity}}
          </p> -->

          <ion-card>
            <ion-card-header>
              <ion-card-title *ngIf="order.Restaurant"
                >{{ order?.Restaurant.name}}</ion-card-title
              >
            </ion-card-header>
            <ion-card-content>
              <ion-list *ngFor="let item of order.Items">
                <ion-item>
                  <ion-card-subtitle
                    ><strong>{{item.name}}: </strong>
                    {{item.price * item.OrderItem.quantity | currency }}
                    ({{item.OrderItem.quantity}} ea)
                  </ion-card-subtitle>
                  <!-- <ion-label>Grand Total{{getGrandTotal()}} </ion-label> -->
                </ion-item>
              </ion-list>
            </ion-card-content>
          </ion-card>

          <ion-item lines="none">
            <ion-label>
              <ion-row>
                <ion-col size="6">
                  <ion-button
                    fill="outline"
                    expand="block"
                    color="secondary"
                    (click)="reorder(order)"
                    >REORDER</ion-button
                  >
                </ion-col>
                <ion-col size="6">
                  <ion-button
                    fill="outline"
                    expand="block"
                    color="primary"
                    routerLink="/stats"
                    >ORDER STATS</ion-button
                  >
                </ion-col>
              </ion-row>
            </ion-label>
          </ion-item>
        </ion-item-group>
      </ng-container>
    </ion-list>
  </ng-container>
</ion-content>

<!-- <div *ngForOf="let order of orders; let i=index">
  <div>
    {{ order.status}}
    <ng-container *ngFor="let item of order.Items;">
      <p *ngIf="item.price">{{ item.price}}</p>
    </ng-container>
  </div>
</div> -->
